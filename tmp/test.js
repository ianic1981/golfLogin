"use strict";
const Nightmare = require("nightmare");
const moment = require("moment");
const nightmare = new Nightmare({ show: true });
var argv = require('minimist')(process.argv.slice(2));
console.log(argv);
var user = argv.user;
var pwd = argv.pwd;
let myMoment = moment();
myMoment.add(21, 'days');
console.log(myMoment.date());
console.log(myMoment.month());
const dayOption = myMoment.date();
const monthOption = myMoment.month();
//--usr 59629 --pwd h3lpm3
nightmare
    .goto('https://www.brsgolf.com/wychwoodpark/member/login')
    .type('[name="_username"]', user)
    .type('[name="_password"]', pwd)
    .click('input[name="SUBMIT"]')
    .wait('.book_a_tee_time_button')
    .click('.book_a_tee_time_button')
    .evaluate(selectMonth, monthOption)
    .evaluate(selectDay, dayOption)
    .wait(".table_white_text")
    .evaluate(() => {
    let inputs = document.querySelector(".table_white_text tbody").querySelectorAll("tr");
    for (var i = 0, length = inputs.length; i < length; i++) {
        if (inputs[i].innerText.indexOf('16:') >= 0 && inputs[i].innerText.trim().length == 5) {
            var val = inputs[i].querySelectorAll("input[name=\"SubmitButton\"]");
            val[0].click();
            return inputs[i].innerText;
        }
    }
})
    .wait('.back_button_cell a')
    .wait(1000)
    .select("[name='Player1_uid']", "448")
    .select("[name='Player2_uid']", "449")
    .select("[name='Player3_uid']", "Member")
    .select("[name='Player4_uid']", "Member")
    .wait(9000)
    .click('[name=\'SubmitButton\']')
    .end()
    .then(console.log)
    .catch((error) => {
    console.error('Search failed:', error);
});
function selectMonth(month) {
    console.log(month);
    var test = document.querySelector(".month_navigation .t_b");
    var test2 = test.getElementsByTagName("a");
    test2.item(month).click();
}
function selectDay(dayOption) {
    console.log(dayOption);
    let day = document.querySelector(".tableList tbody").getElementsByTagName("tr")[dayOption];
    day.getElementsByClassName("day_num").item(0).getElementsByTagName("a").item(0).click();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3Rlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHVDQUF1QztBQUN2QyxpQ0FBaUM7QUFDakMsTUFBTSxTQUFTLEdBQUcsSUFBSSxTQUFTLENBQUMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUVoRCxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RCxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO0FBRWpCLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDckIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztBQUVuQixJQUFJLFFBQVEsR0FBa0IsTUFBTSxFQUFFLENBQUM7QUFHdkMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUE7QUFFeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtBQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFBO0FBRTdCLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNsQyxNQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFHckMsMEJBQTBCO0FBRTFCLFNBQVM7S0FDSixJQUFJLENBQUMsbURBQW1ELENBQUM7S0FDekQsSUFBSSxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQztLQUNoQyxJQUFJLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxDQUFDO0tBQy9CLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQztLQUM3QixJQUFJLENBQUMseUJBQXlCLENBQUM7S0FDL0IsS0FBSyxDQUFD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